<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="utf-8" />
    <title>@ViewData["Title"] - G3TD Shop</title>
    <!-- Thêm dòng này để hiển thị icon -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" />
    <link rel="stylesheet" href="/css/main.css" />
    <link rel="stylesheet" href="/css/site.css" />
</head>
<body>

    @{
        var controller = ViewContext.RouteData.Values["controller"]?.ToString().ToLower();
        var action = ViewContext.RouteData.Values["action"]?.ToString().ToLower();
    }

    @if (controller == "home" && action == "index")
    {
        <!-- Splash screen -->
        <div id="splash-screen" class="position-fixed top-0 start-0 w-100 h-100 bg-white d-flex justify-content-center align-items-center" style="z-index: 9999;">
            <div class="text-center">
                <img src="@Url.Content("~/LOGO.QR/logo-G3TD.png")" alt="Logo" style="height: 100px;" />
                <h2 class="mt-3 text-danger fw-bold">Chào mừng đến với G3TD SHOP</h2>
                <div class="spinner-border text-danger mt-3" role="status">
                    <span class="visually-hidden">Loading...</span>
                </div>
            </div>
        </div>
        <link rel="stylesheet" href="@Url.Content("~/css/splash.css")" />
        <script src="@Url.Content("~/js/splash.js")"></script>
    }


    <div class="page-wrapper d-flex flex-column min-vh-100">
        <div class="top-bar">
            <div class="top-bar-left">
                <i class="bi bi-telephone-fill"></i> <span>0933 008831</span>
                <span class="working-hours">| 08:00 - 17:00</span>
            </div>
            <div class="top-bar-right">
                <a href="#" class="social-icon"><i class="bi bi-facebook"></i></a>
                <a href="#" class="social-icon"><i class="bi bi-github"></i></a>
                <a href="#" class="social-icon"><i class="bi bi-whatsapp"></i></a>
            </div>
        </div>
    <!-- Header -->
    <header class="bg-white border-bottom py-4 shadow-sm">
        <div class="container d-flex justify-content-between align-items-center">
            <div class="d-flex align-items-center gap-3">
                    <img src="~/images/logo.jpg" alt="img" style="height: 80px; width: auto;" />
        
            </div>
                <form class="d-flex w-50 search-bar">

                    <input class="form-control form-control-lg" placeholder="Thỏa mãn nhu cầu trang trí nhà..." />
                    <button class="btn btn-danger ms-2 px-3">🔍</button>
                </form>

            <div class="text-end">
                <div class="fw-semibold">Tư vấn: <span class="text-danger">09*********</span></div>
                <div class="fw-semibold">Đại lý: <span class="text-danger">09*********</span></div>
            </div>
        </div>
    </header>

    <!-- Nav -->
        <nav class="bg-light border-bottom" style="background-color: #ffffdd !important">

        <div class="container">
            <ul class="nav">
                <li class="nav-item">
                    <a class="nav-link" asp-controller="Home" asp-action="Index">Trang chủ</a>
                </li>


                    <!-- Menu: Giới thiệu -->
                    <li class="nav-item ">
                        <a class="nav-link" asp-controller="GioiThieu" asp-action="Index">Giới thiệu </a>
                        </a>
                    </li>
                    <!-- Dropdown Sản phẩm -->
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" asp-controller="SanPham" asp-action="Index">Sản phẩm</a>
                        <ul class="dropdown-menu">
                            <li><a class="dropdown-item" asp-controller="SanPham" asp-action="Index" asp-route-category="Phòng khách">Phòng khách</a></li>
                            <li><a class="dropdown-item" asp-controller="SanPham" asp-action="Index" asp-route-category="Phòng ngủ">Phòng ngủ</a></li>
                            <li><a class="dropdown-item" asp-controller="SanPham" asp-action="Index" asp-route-category="Phòng ăn">Phòng ăn</a></li>
                            <li><a class="dropdown-item" asp-controller="SanPham" asp-action="Index" asp-route-category="Phòng làm việc">Phòng làm việc</a></li>
                            <li><a class="dropdown-item" asp-controller="SanPham" asp-action="Index" asp-route-category="Nội thất trẻ em">Nội thất trẻ em</a></li>
                            <li><a class="dropdown-item" asp-controller="SanPham" asp-action="Index" asp-route-category="Đồ trang trí">Đồ trang trí</a></li>
                            <li><a class="dropdown-item" asp-controller="SanPham" asp-action="Index" asp-route-category="Đèn & chiếu sáng">Đèn & chiếu sáng</a></li>
                            <li><a class="dropdown-item" asp-controller="SanPham" asp-action="Index" asp-route-category="Rèm, thảm & phụ kiện">Rèm, thảm & phụ kiện</a></li>
                            <li><a class="dropdown-item" asp-controller="SanPham" asp-action="Index" asp-route-category="Bàn làm việc">Bàn làm việc</a></li>
                            <li><a class="dropdown-item" asp-controller="SanPham" asp-action="Index" asp-route-category="Ghế văn phòng">Ghế văn phòng</a></li>
                            <li><a class="dropdown-item" asp-controller="SanPham" asp-action="Index" asp-route-category="Tủ kệ trang trí">Tủ kệ trang trí</a></li>
                        </ul>
                    </li>


                    <!-- Dropdown Decor -->

                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" asp-controller="Decor" asp-action="Index">Decor</a>
                        <ul class="dropdown-menu">
                            <li><a class="dropdown-item" asp-controller="Decor" asp-action="Index" asp-route-category="1">Phòng khách</a></li>
                            <li><a class="dropdown-item" asp-controller="Decor" asp-action="Index" asp-route-category="2">Phòng ngủ</a></li>
                            <li><a class="dropdown-item" asp-controller="Decor" asp-action="Index" asp-route-category="3">Phòng ăn</a></li>
                            <li><a class="dropdown-item" asp-controller="Decor" asp-action="Index" asp-route-category="4">Phòng làm việc</a></li>
                        </ul>
                    </li>


                <!-- Dropdown tin tức -->
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" asp-controller="TinTuc" asp-action="Index">Tin Tức</a>
                    </a>
                    <div class="dropdown-menu">
                        <a class="dropdown-item" asp-controller="News" asp-action="Knowledge"><i class="bi bi-lightbulb"></i> Kiến thức nội thất</a>
                        <a class="dropdown-item" asp-controller="News" asp-action="Design"><i class="bi bi-brush"></i> Thiết kế đẹp</a>
                        <a class="dropdown-item" asp-controller="News" asp-action="Promotions"><i class="bi bi-tags"></i> Chương trình khuyến mãi</a>
                    </div>
                </li>

                    <!-- Menu: Liên Hệ -->
                    <li class="nav-item ">
                        <a class="nav-link" asp-controller="LienHe" asp-action="Index">Liên Hệ </a>
                        </a>
                    </li>


                <!-- Flash Sale -->
                <li class="nav-item">
                    <a class="nav-link text-danger fw-bold" asp-controller="FlashSale" asp-action="Index">
                        <i class="bi bi-lightning-charge"></i> FLASH SALE
                    </a>
                </li>

                <!-- Giỏ hàng -->
              

                <li class="nav-item"><a class="nav-link text-danger fw-bold" asp-controller="FlashSale" asp-action="Index"></a></li>
                    @{
                        int soLuongGioHang = Context.Session.GetInt32("SoLuongGioHang") ?? 0;
                    }

                    @if (User.Identity.IsAuthenticated)
                    {
                        <li class="nav-item ms-auto position-relative">
                            <a class="nav-link d-inline-flex align-items-center gap-1" asp-controller="GioHang" asp-action="Index">
                                <i class="bi bi-cart3 fs-5 position-relative">
                                    @if (soLuongGioHang > 0)
                                    {
                                        <span class="badge bg-danger text-white position-absolute top-0 start-100 translate-middle-y translate-middle-x rounded-pill" style="font-size: 0.7rem; padding: 3px 6px;">
                                            @soLuongGioHang
                                        </span>
                                    }
                                </i>
                                <span class="fw-bold text-danger">Giỏ hàng</span>
                            </a>
                        </li>
                    }
                    else
                    {
                        <li class="nav-item ms-auto position-relative">
                            <a class="nav-link d-inline-flex align-items-center gap-1" asp-controller="Auth" asp-action="Login">
                                <i class="bi bi-cart3 fs-5 position-relative"></i>
                                <span class="fw-bold text-danger">Giỏ hàng</span>
                            </a>
                        </li>
                    }


                    @{
                        var hoTen = User.Identity.Name ?? "Ẩn danh";
                    }

                    @if (!User.Identity.IsAuthenticated)
                    {
                        <li class="nav-item">
                            <a class="nav-link" asp-controller="Auth" asp-action="Login">Đăng nhập>
                                <i class="bi bi-person-circle"></i>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" asp-controller="Auth" asp-action="Register">Đăng ký</a>
                        </li>
                    }
                    else
                    {
                        <li class="nav-item d-flex align-items-center">
                            <a class="nav-link d-flex align-items-center text-success fw-semibold" asp-controller="User" asp-action="Profile">
                            <img src="@((ViewBag.Avatar != null) ? ViewBag.Avatar : Url.Content("~/uploads/avatars/Avatar.jpg"))"
                                     alt="Avatar"
                                     class="rounded-circle me-2"
                                     style="width: 32px; height: 32px; object-fit: cover;" />
                                @ViewBag.HoTen
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link text-danger fw-semibold" asp-controller="Auth" asp-action="Logout">Đăng xuất</a>
                        </li>
                    }


            </ul>
        </div>
    </nav>


    <!-- Main content -->
    <main class="flex-fill container my-4">
        @RenderBody()
    </main>

    <!-- Footer nội dung -->
    <section class="footer">
        <div class="container">
            <div class="footer-content row">
                <div class="col-md-3 footer-brand">
                    <h2>🛋️ Nội Thất HomeDecor</h2>
                    <p>Chúng tôi cung cấp các sản phẩm nội thất chất lượng...</p>
                </div>
                <div class="col-md-3 footer-column">
                    <h5>Về Chúng Tôi</h5>
                    <ul>
                            <li><a asp-controller="GioiThieu" asp-action="Index">Giới Thiệu</a></li>
                            <li><a asp-controller="SanPham" asp-action="Index">Sản Phẩm</a></li>
                            <li><a asp-controller="Decor" asp-action="Index">Decor</a></li>
                            <li><a asp-controller="TinTuc" asp-action="Index">Tin Tức</a></li>
                        </ul>
                </div>
                    <div class="col-md-3 footer-column">
                        <h5>Hỗ Trợ</h5>
                        <ul>
                            <li><a asp-controller="LienHe" asp-action="Index">Liên hệ</a></li>
                            <li><a href="/User/Profile#historySection">Thông Tin Giao Hàng</a></li>
                            <li><a asp-controller="ThongTin" asp-action="DieuKhoan">Điều Khoản</a></li>
                            <li><a asp-controller="ThongTin" asp-action="BaoMat">Bảo Mật</a></li>
                        </ul>
                    </div>
                <div class="col-md-3 footer-column">
                    <h5>Tài Nguyên</h5>
                    <ul>
                        <li><a href="#">Tư Vấn Miễn Phí</a></li>
                        <li><a href="#">Blog</a></li>
                        <li><a href="#">YouTube</a></li>
                    </ul>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer bản quyền -->
    <footer class="bg-dark text-white text-center py-3">
        © 2025 G3TD-SHOP - All rights reserved.
    </footer>

    </div> <!-- đóng page-wrapper -->
    <!-- Script -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

    <!-- Facebook Messenger Plugin chat -->
    <div id="fb-root"></div>
    <div id="fb-customer-chat" class="fb-customerchat"></div>
    <script>
        var chatbox = document.getElementById('fb-customer-chat');
        chatbox.setAttribute("page_id", "YOUR_PAGE_ID");
        chatbox.setAttribute("attribution", "biz_inbox");
    </script>
    <script>
        window.fbAsyncInit = function () {
            FB.init({ xfbml: true, version: 'v18.0' });
        };
        (function (d, s, id) {
            var js, fjs = d.getElementsByTagName(s)[0];
            if (d.getElementById(id)) return;
            js = d.createElement(s); js.id = id;
            js.src = 'https://connect.facebook.net/vi_VN/sdk/xfbml.customerchat.js';
            fjs.parentNode.insertBefore(js, fjs);
        }(document, 'script', 'facebook-jssdk'));
    </script>
    @RenderSection("Scripts", required: false)
</body>
</html>

    