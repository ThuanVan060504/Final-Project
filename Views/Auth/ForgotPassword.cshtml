@model Final_Project.Models.User.ForgotPasswordViewModel

@{
    Layout = null;
    ViewData["Title"] = "Quên mật khẩu";
    var step = ViewBag.Step ?? "Email"; // Email hoặc VerifyOtp
}

<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=0" />
    <title>Quên mật khẩu - Quản trị POS</title>
    <link rel="stylesheet" href="~/Admin/css/bootstrap.min.css" />
    <link rel="stylesheet" href="~/Admin/plugins/fontawesome/css/fontawesome.min.css" />
    <link rel="stylesheet" href="~/Admin/plugins/fontawesome/css/all.min.css" />
    <link rel="stylesheet" href="~/Admin/css/style.css" />
</head>
<body class="account-page">
    <div class="main-wrapper">
        <div class="account-content">
            <div class="login-wrapper">
                <div class="login-content">
                    <div class="login-userset">

                        <div class="login-logo">
                            <img src="~/images/Logo.jpg" alt="logo" />
                        </div>

                        <div class="login-userheading">
                            @if(step.ToString() == "Email")
                            {
                                <h3>Quên mật khẩu?</h3>
                                <h4>Đừng lo! Điều này đôi khi xảy ra. Vui lòng nhập email<br />liên kết với tài khoản của bạn.</h4>
                            }
                            else if(step.ToString() == "VerifyOtp")
                            {
                                <h3>Nhập mã OTP và mật khẩu mới</h3>
                            }
                        </div>

                        @if (TempData["Message"] != null)
                        {
                            <div class="alert alert-success text-center">@TempData["Message"]</div>
                        }

                        @if (ViewData.ModelState.ErrorCount > 0)
                        {
                            <div class="alert alert-danger">
                                @foreach (var error in ViewData.ModelState.Values.SelectMany(v => v.Errors))
                                {
                                    <div>@error.ErrorMessage</div>
                                }
                            </div>
                        }

                        @if(step.ToString() == "Email")
                        {
                            <form asp-action="ForgotPassword" method="post">
                                <div class="form-login">
                                    <label asp-for="Email">Email</label>
                                    <div class="form-addons">
                                        <input asp-for="Email" class="form-control" placeholder="Nhập địa chỉ email" />
                                        <img src="~/Admin/img/icons/mail.svg" alt="mail icon" />
                                    </div>
                                    <span asp-validation-for="Email" class="text-danger small"></span>
                                </div>
                                <div class="form-login">
                                    <button type="submit" class="btn btn-login">Gửi yêu cầu</button>
                                </div>
                            </form>
                        }
                        else if(step.ToString() == "VerifyOtp")
                        {
                            <form asp-action="VerifyOtp" method="post">
                                <div class="form-login">
                                    <label>Mã OTP</label>
                                    <input name="Otp" class="form-control" placeholder="Nhập mã OTP" />
                                </div>
                                <div class="form-login">
                                    <label>Mật khẩu mới</label>
                                    <input name="NewPassword" type="password" class="form-control" placeholder="Nhập mật khẩu mới" />
                                </div>
                                <div class="form-login">
                                    <label>Xác nhận mật khẩu mới</label>
                                    <input name="ConfirmPassword" type="password" class="form-control" placeholder="Xác nhận mật khẩu mới" />
                                </div>
                                <div class="form-login">
                                    <button type="submit" class="btn btn-login">Xác nhận</button>
                                </div>
                            </form>
                        }

                        <div class="signinform text-center mt-3">
                            <h4>Quay lại <a asp-controller="Auth" asp-action="Login" class="hover-a">Đăng nhập</a></h4>
                        </div>

                    </div>
                </div>

                <div class="login-img">
                    <img src="~/images/Login.jpg" alt="ảnh đăng nhập" />
                </div>
            </div>
        </div>
    </div>

    <script src="~/Admin/js/jquery-3.6.0.min.js"></script>
    <script src="~/Admin/js/feather.min.js"></script>
    <script src="~/Admin/js/bootstrap.bundle.min.js"></script>
    <script src="~/Admin/js/script.js"></script>

    @section Scripts {
        <partial name="_ValidationScriptsPartial" />
    }
</body>
</html>
